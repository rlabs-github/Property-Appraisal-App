(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{6084:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/form-filler",function(){return t(8514)}])},7655:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4848),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6540),_components_ui_card__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3566),_components_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9748),_components_ui_select__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6992),_components_ui_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5130);let FormFiller=param=>{let{templates,onSubmit}=param,[selectedTemplate,setSelectedTemplate]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[formData,setFormData]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),[isSubmitting,setIsSubmitting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),currentTemplate=templates.find(e=>e.id===selectedTemplate),handleFieldChange=(e,r)=>{if(setFormData(t=>({...t,[e]:r})),currentTemplate){let t={...formData,[e]:r},a=calculateDependentFields(currentTemplate.sections,t);setFormData(e=>({...e,...a}))}},calculateDependentFields=(sections,currentData)=>{let calculations={};return sections.forEach(section=>{section.fields.forEach(field=>{if("calculation"===field.type&&field.calculationFormula)try{let formula=field.calculationFormula;Object.entries(currentData).forEach(e=>{let[r,t]=e;formula=formula.replace("{".concat(r,"}"),t)}),calculations[field.id]=eval(formula)}catch(error){calculations[field.id]="Error"}})}),calculations},handleSubmit=async e=>{if(e.preventDefault(),onSubmit&&selectedTemplate)try{setIsSubmitting(!0),await onSubmit({templateId:selectedTemplate,data:formData})}catch(e){console.error("Error submitting form:",e)}finally{setIsSubmitting(!1)}},renderField=e=>{switch(e.type){case"text":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{type:"text",value:formData[e.id]||"",onChange:r=>handleFieldChange(e.id,r.target.value),placeholder:e.placeholder,required:e.required});case"number":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{type:"number",value:formData[e.id]||"",onChange:r=>handleFieldChange(e.id,r.target.value),placeholder:e.placeholder,required:e.required});case"select":var r;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.l6,{value:formData[e.id]||"",onValueChange:r=>handleFieldChange(e.id,r),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.yv,{placeholder:"Select an option"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.gC,{children:null===(r=e.options)||void 0===r?void 0:r.map(e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.eb,{value:e,children:e},e))})]});case"calculation":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{type:"text",value:formData[e.id]||"",readOnly:!0,className:"bg-gray-50"});case"currency":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{type:"number",value:formData[e.id]||"",onChange:r=>handleFieldChange(e.id,r.target.value),className:"pl-7",placeholder:"0.00",required:e.required,min:"0",step:"0.01"})]});default:return null}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6 max-w-3xl mx-auto p-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Zp,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.aR,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.l6,{value:selectedTemplate||"",onValueChange:e=>{setSelectedTemplate(e),setFormData({})},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.bq,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.yv,{placeholder:"Choose a template..."})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.gC,{children:templates.map(e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_select__WEBPACK_IMPORTED_MODULE_4__.eb,{value:e.id,children:e.name},e.id))})]})]})})}),currentTemplate&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{onSubmit:handleSubmit,children:[currentTemplate.sections.map(e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Zp,{className:"mb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.aR,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-semibold",children:e.title})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_card__WEBPACK_IMPORTED_MODULE_2__.Wu,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-4",children:e.fields.map(e=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e.label,e.required&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),renderField(e)]},e.id))})})]},e.id)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-end mt-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{type:"submit",disabled:isSubmitting,className:"bg-blue-600 text-white hover:bg-blue-700",children:isSubmitting?"Submitting...":"Submit Form"})})]})]})},__WEBPACK_DEFAULT_EXPORT__=FormFiller},9648:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var a=t(4848),l=t(6715),s=t(9206);let i=()=>{let{data:e,isLoading:r}=(0,s.I)({queryKey:["user"],queryFn:async()=>{let e=await fetch("/api/me");if(!e.ok)throw Error("Failed to fetch user");return e.json()}});return{user:e,isLoading:r,login:async(e,r)=>{try{let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!t.ok)throw Error("Invalid login credentials");return await t.json()}catch(e){throw console.error("Login failed:",e),e}}}},n=e=>{let{children:r}=e,{user:t,isLoading:s}=i(),n=(0,l.useRouter)();return s?(0,a.jsx)("div",{children:"Loading..."}):t?(0,a.jsx)(a.Fragment,{children:r}):(n.push("/login?from=".concat(n.asPath)),null)}},9748:(e,r,t)=>{"use strict";t.d(r,{$:()=>i});var a=t(4848),l=t(6540),s=t(8019);let i=(0,l.forwardRef)((e,r)=>{let{className:t,variant:l="default",size:i="md",...n}=e,d="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50",o={default:"bg-gray-900 text-white hover:bg-gray-800",primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"bg-transparent hover:bg-gray-100"},c={sm:"h-8 px-3 text-sm",md:"h-10 px-4",lg:"h-12 px-6 text-lg",icon:"h-10 w-10 p-2 rounded-full flex items-center justify-center"};return(0,a.jsx)("button",{className:(0,s.cn)(d,o[l],c[i],t),ref:r,...n})});i.displayName="Button"},3566:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var a=t(4848),l=t(6540),s=t(8019);let i=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});i.displayName="Card";let n=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle",l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},5130:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var a=t(4848),l=t(6540),s=t(8019);let i=(0,l.forwardRef)((e,r)=>{let{className:t,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:(0,s.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},6992:(e,r,t)=>{"use strict";t.d(r,{bq:()=>u,eb:()=>f,gC:()=>m,l6:()=>o,yv:()=>c});var a=t(4848),l=t(6540),s=t(213),i=t(2027),n=t(5),d=t(8019);let o=s.bL;s.YJ;let c=s.WT,u=l.forwardRef((e,r)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(s.l9,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[l,(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})]})});u.displayName=s.l9.displayName;let m=l.forwardRef((e,r)=>{let{className:t,children:l,position:i="popper",...n}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{ref:r,className:(0,d.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===i&&"translate-y-1",t),position:i,...n,children:(0,a.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});m.displayName=s.UC.displayName;let f=l.forwardRef((e,r)=>{let{className:t,children:l,...i}=e;return(0,a.jsxs)(s.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(s.p4,{children:l})]})});f.displayName=s.q7.displayName},8019:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var a=t(4164),l=t(856);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,l.QP)((0,a.$)(r))}},8514:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(4848),l=t(6540),s=t(9648),i=t(7655),n=t(1823);let d=()=>{let[e,r]=(0,l.useState)([]),{showNotification:t,setIsLoading:d}=(0,n.n)();(0,l.useEffect)(()=>{o()},[]);let o=async()=>{d(!0);try{let e=await fetch("/api/form-templates"),t=await e.json();r(t)}catch(e){t("error","Failed to load templates")}finally{d(!1)}},c=async e=>{try{(await fetch("/api/form-submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&t("success","Form submitted successfully")}catch(e){t("error","Failed to submit form")}};return(0,a.jsx)(s.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Form Filler"}),(0,a.jsx)(i.A,{templates:e,onSubmit:c})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[399,872,18,855,636,593,792],()=>r(6084)),_N_E=e.O()}]);