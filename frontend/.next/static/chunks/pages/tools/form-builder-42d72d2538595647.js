(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{2812:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/form-builder",function(){return t(960)}])},789:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(3943).A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},1244:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(3943).A)("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]])},8097:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(3943).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7852:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(3943).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},3004:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(3943).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9648:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var l=t(4848),r=t(6715),s=t(9206);let i=()=>{let{data:e,isLoading:a}=(0,s.I)({queryKey:["user"],queryFn:async()=>{let e=await fetch("/api/me");if(!e.ok)throw Error("Failed to fetch user");return e.json()}});return{user:e,isLoading:a,login:async(e,a)=>{try{let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!t.ok)throw Error("Invalid login credentials");return await t.json()}catch(e){throw console.error("Login failed:",e),e}}}},d=e=>{let{children:a}=e,{user:t,isLoading:s}=i(),d=(0,r.useRouter)();return s?(0,l.jsx)("div",{children:"Loading..."}):t?(0,l.jsx)(l.Fragment,{children:a}):(d.push("/login?from=".concat(d.asPath)),null)}},9748:(e,a,t)=>{"use strict";t.d(a,{$:()=>i});var l=t(4848),r=t(6540),s=t(8019);let i=(0,r.forwardRef)((e,a)=>{let{className:t,variant:r="default",size:i="md",...d}=e;return(0,l.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50",{default:"bg-gray-900 text-white hover:bg-gray-800",primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"bg-transparent hover:bg-gray-100"}[r],{sm:"h-8 px-3 text-sm",md:"h-10 px-4",lg:"h-12 px-6 text-lg",icon:"h-10 w-10 p-2 rounded-full flex items-center justify-center"}[i],t),ref:a,...d})});i.displayName="Button"},3566:(e,a,t)=>{"use strict";t.d(a,{Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>d});var l=t(4848),r=t(6540),s=t(8019);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let n=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},5130:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var l=t(4848),r=t(6540),s=t(8019);let i=(0,r.forwardRef)((e,a)=>{let{className:t,type:r,...i}=e;return(0,l.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});i.displayName="Input"},6992:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>h,gC:()=>m,l6:()=>c,yv:()=>o});var l=t(4848),r=t(6540),s=t(213),i=t(2027),d=t(5),n=t(8019);let c=s.bL;s.YJ;let o=s.WT,u=r.forwardRef((e,a)=>{let{className:t,children:r,...d}=e;return(0,l.jsxs)(s.l9,{ref:a,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...d,children:[r,(0,l.jsx)(i.A,{className:"h-4 w-4 opacity-50"})]})});u.displayName=s.l9.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,position:i="popper",...d}=e;return(0,l.jsx)(s.ZL,{children:(0,l.jsx)(s.UC,{ref:a,className:(0,n.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===i&&"translate-y-1",t),position:i,...d,children:(0,l.jsx)(s.LM,{className:(0,n.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});m.displayName=s.UC.displayName;let h=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,l.jsxs)(s.q7,{ref:a,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(s.VF,{children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})}),(0,l.jsx)(s.p4,{children:r})]})});h.displayName=s.q7.displayName},8019:(e,a,t)=>{"use strict";t.d(a,{cn:()=>s});var l=t(4164),r=t(856);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,l.$)(a))}},960:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>y});var l=t(4848),r=t(9648),s=t(6540),i=t(3004),d=t(1244),n=t(7852),c=t(8097),o=t(789),u=t(3566),m=t(5130),h=t(9748),p=t(6992);let x=e=>{var a,t;let{onSave:r,initialData:x}=e,[f,y]=(0,s.useState)(null!==(a=null==x?void 0:x.name)&&void 0!==a?a:""),[g,b]=(0,s.useState)(null!==(t=null==x?void 0:x.sections)&&void 0!==t?t:[]),[v,j]=(0,s.useState)(!1),w=e=>{b([...g,{id:"section-".concat(Date.now()),type:e,title:"New ".concat(e," Section"),fields:[]}]),j(!0)},N=(e,a)=>{let t={id:"field-".concat(Date.now()),type:a,label:"New ".concat(a," Field"),required:!1,placeholder:"",documentMapping:"",calculationFormula:"calculation"===a?"":void 0,options:"select"===a?[]:void 0};b(a=>a.map(a=>a.id===e?{...a,fields:[...a.fields,t]}:a)),j(!0)},k=(e,a,t)=>{b(l=>l.map(l=>l.id===e?{...l,fields:l.fields.map(e=>e.id===a?{...e,...t}:e)}:l)),j(!0)},C=async()=>{if(r)try{await r({name:f,sections:g}),j(!1)}catch(e){console.error("Error saving form:",e)}},A=(e,a)=>(0,l.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("label",{htmlFor:"field-label-".concat(e.id),className:"text-sm",children:"Field Label"}),(0,l.jsx)(m.p,{id:"field-label-".concat(e.id),type:"text",value:e.label,onChange:t=>k(a,e.id,{label:t.target.value}),placeholder:"Field Label",className:"text-sm font-medium"}),(0,l.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>{b(a=>a.map(a=>({...a,fields:a.fields.filter(a=>a.id!==e.id)}))),j(!0)},children:(0,l.jsx)(i.A,{className:"w-4 h-4 text-red-500"})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("label",{htmlFor:"field-type-".concat(e.id),className:"text-sm",children:"Field Type:"}),(0,l.jsxs)(p.l6,{value:e.type,onValueChange:t=>k(a,e.id,{type:t}),children:[(0,l.jsx)(p.bq,{id:"field-type-".concat(e.id),className:"w-32",children:(0,l.jsx)(p.yv,{})}),(0,l.jsxs)(p.gC,{children:[(0,l.jsx)(p.eb,{value:"text",children:"Text"}),(0,l.jsx)(p.eb,{value:"number",children:"Number"}),(0,l.jsx)(p.eb,{value:"select",children:"Select"}),(0,l.jsx)(p.eb,{value:"calculation",children:"Calculation"}),(0,l.jsx)(p.eb,{value:"currency",children:"Currency"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(m.p,{id:"required-".concat(e.id),type:"checkbox",checked:e.required,onChange:t=>k(a,e.id,{required:t.target.checked}),className:"rounded border-gray-300"}),(0,l.jsx)("label",{htmlFor:"required-".concat(e.id),className:"text-sm",children:"Required"})]}),(0,l.jsx)("label",{htmlFor:"document-mapping-".concat(e.id),className:"text-sm",children:"Document Mapping"}),(0,l.jsx)(m.p,{id:"document-mapping-".concat(e.id),type:"text",value:e.documentMapping,onChange:t=>k(a,e.id,{documentMapping:t.target.value}),placeholder:"Document placeholder (e.g., {property_address})",className:"w-full text-sm"}),"calculation"===e.type&&(0,l.jsx)(m.p,{type:"text",value:e.calculationFormula,onChange:t=>k(a,e.id,{calculationFormula:t.target.value}),placeholder:"Calculation formula (e.g., field1 * field2)",className:"w-full text-sm"})]})]},e.id);return(0,l.jsxs)("div",{className:"h-full flex flex-col",children:[(0,l.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(m.p,{type:"text",value:f,onChange:e=>{y(e.target.value),j(!0)},placeholder:"Enter template name...",className:"w-full"}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsxs)(h.$,{variant:"outline",children:[(0,l.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Export Template"]}),(0,l.jsxs)(h.$,{disabled:!v,onClick:C,children:[(0,l.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Save Template"]})]})]})}),(0,l.jsxs)("div",{className:"flex flex-1",children:[(0,l.jsxs)("div",{className:"w-64 border-r border-gray-200 p-4 bg-white",children:[(0,l.jsx)("h3",{className:"font-semibold mb-4",children:"Add Section"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(h.$,{variant:"outline",className:"w-full",onClick:()=>w("standard"),children:[(0,l.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Standard Section"]}),(0,l.jsxs)(h.$,{variant:"outline",className:"w-full",onClick:()=>w("calculation"),children:[(0,l.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Calculation Section"]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-auto p-6",children:g.map(e=>(0,l.jsxs)(u.Zp,{children:[(0,l.jsxs)(u.aR,{className:"flex justify-between",children:[(0,l.jsx)(m.p,{type:"text",value:e.title,onChange:a=>{b(t=>t.map(t=>t.id===e.id?{...t,title:a.target.value}:t)),j(!0)},className:"text-lg font-semibold bg-transparent border-none"}),(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>{b(a=>a.filter(a=>a.id!==e.id)),j(!0)},children:(0,l.jsx)(i.A,{className:"w-4 h-4 text-red-500"})})})]}),(0,l.jsxs)(u.Wu,{children:[e.fields.map(a=>A(a,e.id)),(0,l.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>N(e.id,"text"),className:"text-blue-600",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 mr-1"}),"Add Field"]})]})]},e.id))})]})]})};var f=t(1823);let y=()=>{let{isLoading:e,setIsLoading:a,showNotification:t}=(0,f.n)(),s=async e=>{try{a(!0),await new Promise(e=>setTimeout(e,1e3)),t("success","Form template saved successfully")}catch(e){t("error","Failed to save form template"),console.error("Error saving form:",e)}finally{a(!1)}};return e?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,l.jsx)(r.A,{children:(0,l.jsx)(x,{onSave:s})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[399,872,18,855,636,593,792],()=>a(2812)),_N_E=e.O()}]);